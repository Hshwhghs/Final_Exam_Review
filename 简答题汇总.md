
## 往年简答题

### 1、所有的视图是否都可以更新？为什么？
更新视图指通过视图来插入、删除和修改数据。由于视图是不实际存储数据的**虚表**，因此对视图的更新**最终要转化为对基本表的更新**。
为防止用户通过视图对数据进行增加、删除、修改时，有意无意的对不属于视图范围的基本表数据进行操作，所以一些相关措施使得**不是所有的视图都可以更新**。在 SQL 中，视图**在定义时**可以加上 `WITH CHECK OPTION` 子句，这样在视图上增、删、改数据时，DBMS 会检查视图定义中的条件，若不满足条件，则拒绝执行该操作。
另外，一般情况下**行列子集视图**是可以更新的，其他一些视图是无法更新的。例如在带表达式的视图中，若某一属性是原基本表中**几个属性计算得到**，更新该属性值则可能无法转换为对原始属性的更新。
举例来说，若有一视图是由学生成绩基本表导出，其中一个虚拟列为“语数外平均分”，此时若直接更新该平均分，则 DBMS 不知道如何修改基本表中对应的语数外分项成绩。

### 2、为什么要对关系表达式进行优化？
关系代数表达式由关系代数操作组合而成。操作中，**笛卡尔积和连接操作最费时**。如果直接按表达式书写顺序执行，必将花费很多时间，并**生成大量中间结果，效率较低**。
如果在执行前，由 DBMS 的查询子系统先对关系代数表达式进行优化，尽可能**先执行选择和投影操作**，则进行笛卡尔积或连接时可以减少中间结果，并节省时间。
优化工作是由 DBMS 完成的，用户在写关系代数表达式时不必关心优化一事，仍能以最简练的形式书写。

### 3、数据库系统的数据独立性是指什么？
数据独立性是指**应用程序和数据之间相互独立、互不影响**，即数据结构的修改不会引起应用程序的修改。
数据独立性包括**物理数据独立性**和**逻辑数据独立性**。物理数据独立性是指数据库物理结构改变时，不必修改现有的应用程序；逻辑数据独立性是指数据库逻辑结构改变时不必改变应用程序。
数据库系统是**通过三级模式之间的两级映像**来提供数据独立性的。

### 4、等值连接和自然连接的区别？
区别如下：
1. 自然连接一定是等值连接，但等值连接不一定是自然连接。因为**自然连接要求相等的分量必须是公共属性**，而等值连接要求相等的分量不一定是公共属性。
2. 等值连接**不把重复属性去掉**，而自然连接**要把重复属性去掉**

### 5、为什么将 SQL 中的视图称为“虚表”
在 SQL 中创建一个视图时，系统只是将视图的定义存放在**数据字典**中，并**不存储视图对应的数据**，在用户**使用视图时才去求对应的数据**。因此我们将视图称为“虚表”。
这样处理的目的是为了**节约存储空间**，因为视图对应的数据都可以从相应的基本表中获得。

### 6、列出 3 条查询优化的启发式规则
1. 尽量**早做选择**
2. 尽量**早做投影**
3. 同时进行投影运算和选择运算
4. 将投影运算与其前或后的双目运算结合起来
5. 将选择运算与其前的笛卡尔积结合形成连接运算
6. 寻找公共表达式

### 7、“串行调度”和“可串行化调度”的区别
事务的执行次序称为调度。如果多个事务依次执行，则称为事务的串行调度。如果利用分时的方法，同时处理多个事务，则称为事务的并发调度。
如果一个并发调度的结果与某一串行调度的执行结果等价，那么这个并发调度称为是可串行化的调度。

### 8、试述关系模型的参照完整性规则
**定义版**：若属性（或属性组）F 是基本关系 R 的外码，它与基本关系 S 的主码 K 相对应（基本关系 R 和 S 不一定是不同的关系），则对于 R 中每个元组在 F 上的值，必须要么取空值（F 的每个属性值均为空值）或者等于 S 中某个元组的主码值。

**人话版**：在一个关系中给定属性集上的取值也在另一个关系的特定属性集的取值中出现。参照完整性规则就是定义==外键与被参照的主键之间的引用规则==，外键一般应符合如下要求：要么值为空，要么值等于其所参照的关系中某个元组的主键值。

### 9、数据库系统的故障有哪些类型并举例说明
1. 事务内部故障：事务没有达到预期的终点。如运算溢出、并发事务发生死锁而被选中撤销该事务，违反了某些完整性限制而被终止。
2. 系统故障：指造成系统停止运转的任何事件，使系统重新启动。如操作系统故障、DBMS 代码错误、系统断电。
3. 介质故障：指外存故障。如磁盘损坏、磁头碰撞、瞬时强磁场干扰等。

### 10、数据库备份后，什么是动态转储，为何动态转储需要日志文件
**转储**即数据库管理员定期的**将整个数据库复制到存储介质上保存起来**的过程。
**动态转储**是指转储期间允许对数据库进行存取或修改。但由于转储时**有用户事务执行**，动态转储结束后，后备副本上的数据**不能保证正确有效**。为此，必须把转储期间各事务对数据库的**修改活动登记**下来，建立**日志文件**。这样**后备副本加上日志文件**就能把数据库恢复到某一时刻的正确状态。

### 11、什么是可串行化调度？如何保证并发调度的可串行性
多个事务的并发执行是正确的，当且仅当其结果与按某一次序串行的执行它们时的结果相同，我们称这种调度策略为可串行化的调度。一个给定的并发调度，当且仅当它是可串行化的，才认为是**正确调度**。
冲突可串行化的调度一定满足可串行性；或者使用两段锁协议，是一个保证并发调度可串行性的封锁协议。

### 12、两段锁协议的概念/内容？
所有事务必须分两个阶段对数据项加锁和解锁：
1. 对任何数据进行读、写操作之前，首先要申请并获得对该数据项的封锁；
2. 在释放一个封锁后，事务不再申请和获得任何其他封锁

### 13、数据库中日志文件有什么作用？利用日志文件如何进行系统故障的恢复？
**日志文件**是用来记录事务对数据库的更新操作的文件，在数据库恢复中起到重要作用。日志文件可以用来进行事务故障的恢复、系统故障的恢复，并协助后备副本进行介质故障的恢复。
- 对于故障发生时尚未完成的事务，进行撤销处理（反向扫描日志文件，执行逆操作）；
- 对于故障发生前已经提交的事务，进行重做处理（正向扫描日志文件，重新执行日志文件登记的操作）

### 14、系统故障的恢复步骤？
系统故障的恢复步骤如下：
系统重新启动时，恢复子系统撤销所有未完成的事务，并重做所有已提交的事务。即正向扫描日志文件，将已提交事务标志计入 REDO 重做队列，未完成事务将其事务标志计入 UNDO 撤销队列；对 UNDO 队列中的事务进行 UNDO 处理，对 REDO 队列中的事务进行 REDO 处理

### 15、什么是数据库系统的三级模式结构？它是如何保证数据独立性的？
数据库系统的三级模式结构由外模式、模式和内模式三部分构成。
- 模式也称逻辑模式，是数据库中全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图，是与某一应用有关的数据的逻辑表示。
- 外模式也称子模式或用户模式，是数据库用户最终能够看见的和使用的局部数据的逻辑结构和特征的描述，是数据库用户的数据视图，是与某一应用有关的数据的逻辑表示。
- 内模式也称存储模式，一个数据库只有一个内模式，它是数据物理结构和存储方式的描述，是数据在数据库内部的表示方式。

数据库系统的三级模式结构是通过两层映像来保证数据独立性的。
其中，外模式/模式映像保证了数据的**逻辑**独立性，当模式改变时，只需要改变外模式/模式映像，而不需要改变应用；
模式/内模式映像保证了数据的**物理**独立性，当内模式改变时，只需要改变模式/内模式映像，从而也不需要改变应用。

### 16、数据库管理系统的主要功能有哪些？
1. 数据定义功能（提供数据定义语言 DDL）
2. 数据操纵功能（提供数据操纵语言 DML）
3. 数据组织、存储和管理
4. 数据库的事务管理和运行管理
5. 数据库的建立和维护功能
6. 其他功能，例如与网络中其他软件系统的通信等

### 17、数据库设计的基本步骤按顺序有哪些？在哪个阶段进行关系数据库基本表设计？
数据库设计的基本步骤有**需求**分析、**概念**结构设计、**逻辑**结构设计、**物理**结构设计、数据库的**实施**、数据库的**运行和维护**。
在**逻辑**结构设计阶段，进行关系数据库的**基本表设计**。

### 18、事务有哪些特性？数据库管理系统中的并发控制子系统用于保证其中的哪个特性？
事务的特性有原子性、一致性、隔离性、持久性。
**并发控制**主要用于保证事务的**隔离性和一致性**，它通过正确的方式调度并发操作，使一个用户事务的执行不受其他事务的干扰。

### 19、基本关系运算有哪些？为什么称它们为基本关系运算？
基本关系运算一共有 5 个，分别为**并、差、投影、选择和广义笛卡尔积**。
由于其他运算的功能都可以由这 5 个运算来实现，因此称它们为基本关系运算。

### 20、关系数据库的查询处理依次分为哪几个阶段？
查询**分析**、查询**检查**、查询**优化**、查询**执行**（分拣油脂）

### 21、简述相关子查询的一般求解过程
（不熟）
1. 首先，外层的每一元组都被带入内层
2. 内层得到结果
3. 外层的 where 进行条件判断
	- 如果为真，当前元组被选出
	- 否则当前元组不被选出
4. 重复直到外层没有元组为止


## 数据库系统概念章节练习简答题

### 试述 SQL 语言的特点
1. 综合统一。SQL 语言集数据定义语言 DDL、数据操纵语言 DML、数据控制语言 DCL 的功能于一体
2. 高度**非过程化**。用 SQL 语言进行数据操作，只要提出“做什么”，而无需指明“怎么做”，因此无需了解存取路径，存取路径的选择以及 SQL 语句的操作过程由系统自动完成。
3. 面向**集合**的操作方式。SQL 语言采用集合操作方式，不仅操作对象、查找结果可以是元组的结合，而且一次插入、删除、更新操作的对象也可以是元组的集合
4. 以同一种语法结构提供两种使用方式。SQL 语言既是自含式语言，又是嵌入式语言。作为自含式语言，它能够独立的用于联机交互的使用方式；作为嵌入式语言它能够嵌入到高级语言程序中，供程序员设计程序时使用
5. 语言简洁，易学易用

### 基本表和视图的区别与联系
- 基本表是本身独立存在的表，在 SQL 中一个关系就对应一个表。
- 视图是从一个或几个基本表导出的表。视图本身不独立存储在数据库中，是一个虚表。即数据库中只存放视图的定义而不存放视图对应的数据，这些数据仍存放在导出视图的基本表中。
- 视图在概念上与基本表等同，用户可以如同基本表那样使用视图，可以在视图上再定义视图。

### 视图的优点
1. 视图能够简化用户的操作。
2. 视图使用户能以多种角度看待同一数据。
3. 视图对重构数据库提供了一定程度的逻辑独立性。
4. 视图能够对机密数据提供安全保护。

### 数据库的安全性
数据库的安全性是指保护数据库以防止不合法的使用所造成的数据泄露、更改或破坏。

### 什么是数据库中的自主存取控制方法和强制存取控制方法？
- 自主存取控制方法：**定义各个用户对不同数据对象的存取权限**。当用户对数据库访问时，首先检查用户的存取权限。防止不合法用户对数据库的存取。
- 强制存取控制方法：每一个数据对象被（强制的）标以一定的密级，每一个用户也被强制的授予某个级别的许可证。**系统规定只有具有某一许可证级别的用户才能存取某一个密级的数据对象**。

### 数据库完整性概念、数据库安全性概念，有什么区别和联系？
- 数据库的完整性和安全性是两个不同的概念，有一定的联系。
- 完整性是为了防止数据库中存在不符合语义的数据，防止错误信息的输入和输出，即所谓垃圾进垃圾出所造成的无效操作和错误结果。
- 安全性是保护数据库防止恶意的破坏和非法的存取。
- 安全性措施防范对象是非法用户和非法操作，完整性措施的防范对象是不合语义的数据。

### 登记日志文件时为什么必须先写日志文件，后写数据库？
- 把对数据的修改写到数据库中和把表示这个修改的日志记录写到日志文件中是两个不同的操作。有可能在这两个操作之间发生故障，即这两个写操作只完成了一个。
- 如果先写了数据库修改，而在运行记录中没有登记这个修改，则以后就无法恢复这个修改了。如果先写日志，但没有修改数据库，在恢复时只不过是多执行一次 UNDO 操作，并不会影响数据库的正确性。所以一定要先写日志文件，即首先把日志记录写到日志文件中，然后才写数据库的修改。